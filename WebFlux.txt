### Начальные методы — вызываются СТРОГО В НАЧАЛЕ
 webClient.get() - Создаёт GET-запрос. Если не указать URI — будет ошибка IllegalArgumentException.
 webClient.post() - Создаёт POST-запрос. Без него нельзя отправить body.
 webClient.put() - Создаёт PUT-запрос. Для обновления данных. Требует body.
 webClient.patch() - Создаёт PATCH-запрос. Частичное обновление.
 webClient.delete() -Создаёт DELETE-запрос. Для удаления ресурса.

### URI — вызывается СРАЗУ после метода HTTP
uri("https://host/path") - Указывает адрес, куда отправляем запрос. Если пропустить — WebClient выбросит ошибку URI_REQUIRED.\

### Заголовки — вызываются ПОСЛЕ URI (Можнно и не указывать и перейти к установки тела запроса)
 header("Name", "Value") - Добавляет HTTP-заголовок. Нужен для токенов, кастомных полей.
 accept(MediaType.APPLICATION_JSON) - Говорит серверу, что клиент хочет получить JSON.
 contentType(MediaType.APPLICATION_JSON) -Говорит серверу, что клиент отправляет JSON.
 cookie("name", "value") - Добавляет cookie.

### Установка тела запроса — ТОЛЬКО для POST/PUT/PATCH
 bodyValue(object) - Сериализует объект в JSON и кладёт в тело запроса. Если объект невозможно сериализовать → будет SerializationException.
 body(Mono<T>, Class<T>) - Устанавливает Mono как тело запроса. Нужен для реактивных цепочек.
 body(Flux<T>, Class<T>) - Передаёт поток данных в теле. Используется для стриминга.

### Выполнение запроса. ИДЕТ строго после установки тела запроса
 retrieve() - выполняет сетевой запрос и формирует response. Автоматически бросает ошибку при 4xx/5xx.
 exchangeToMono(response -> ...) - Даёт полный контроль над статусом и телом. Ошибки не бросает автоматически.
 exchangeToFlux(response -> ...) - То же самое, но для Flux.

### Обработка ошибок — ПОСЛЕ retrieve()
 onStatus(predicate, handler) - Обрабатывает HTTP-статус, например 400 → вернуть своё исключение.
 onErrorResume(e -> ...) - Фолбэк при исключении. Позволяет восстановить выполнение цепочки. К примеру: Получили ошибку -> Записали в бд инфу о том, что произошла ошибка
 onErrorMap(e -> ...) - Преобразует одну ошибку в другую.

### Чтение тела ответа. ПОСЛЕ обработки ошибок
 bodyToMono(Type) - Получаем Response. В параметры передает тот response, который мы ожидаем получить. Если структура JSON неправильная → DecodingException.
 bodyToFlux(Type) - Десериализует JSON-массив в поток объектов.
 toEntity(Type) - Возвращает ResponseEntity<T> со статусом и заголовками.

### Преобразование данных — ПОСЛЕ bodyToMono/bodyToFlux/toEntity
 map(value -> …) — Преобразует один объект в другой. НЕ создаёт новую реактивную цепочку.
 Например: вытащить поле из объекта или изменить структуру ответа.

 flatMap(value -> Mono) — Преобразует объект в другой Mono.
 Используется для асинхронных действий: второй HTTP-запрос, запрос в БД, валидация.

 flatMapMany(value -> Flux) — Преобразует Mono → Flux.
 Применяется, когда внутри ответа есть коллекция, которую нужно развернуть в поток.

 cast(Class) — Приводит объект к нужному типу.
 Если тип неверный → будет ClassCastException.

 switchIfEmpty(fallback) — Подставляет другой Mono, если ответ пустой.
 Используется когда сервер вернул пустой результат.

 then(otherMono) — Игнорирует текущий результат, выполняет следующий Mono.
 Применяется, когда полученное значение не важно.

 thenReturn(value) — Возвращает фиксированное значение, игнорируя прошлый результат.
 Удобно, когда нужна простая финальная заглушка.
 
 doOnNext(value -> …) — Логирование или сайд-эффект.На данные не влияет.

 doFinally(signal -> …) — Выполняется ВСЕГДА (успех/ошибка/отмена).
 Используется для закрытия ресурсов, метрик, логирования завершения.

### Дополнительные операторы Reactor — В КОНЦЕ (После Преобразование данных )
 timeout(Duration) - Ограничивает время ответа. Если превышено → TimeoutException.
 retry(n) - Повторяет запрос n раз при ошибке.
 doOnNext(log::info) - Логирование и другие сайд-эффекты. Не влияет на данные.
 onErrorReturn(value) — При ошибке возвращает фиксированное значение. Удобно для fallback без создания нового Mono.
 ErrorResume(e -> fallbackMono) — При ошибке переключается на другой поток. Используется для восстановления работы цепочки после ошибки.
 onErrorContinue((e, item) -> ...) — Пропускает проблемный элемент и продолжает поток. Удобно, если один элемент падает, а остальные важны.
 retryWhen(Retry.backoff(...)) — Повторяет с кастомной логикой (backoff, условие). Удобно для сложного повторного вызова с задержкой и ограничением количества попыток.

### Сайд-эффекты — В ЛЮБОМ МЕСТЕ ЦЕПОЧКИ
doOnNext(...) — Логирование, метрики, сайд-эффект на каждый элемент.
doOnSubscribe(...) — Действие при подписке (например, логировать начало).
doOnComplete(...) — Действие при успешном завершении.
doOnError(...) — Сайд-эффект при ошибке.
doOnCancel(...) — При отмене подписки.
doFinally(...) — Всегда вызывается (успех/ошибка/отмена).
log() — Логирует все события потока.

###  Завершение — НЕ используется в контроллерах WebFlux
 subscribe() - Запускает реактивную цепочку вручную.
 block() - Блокирует поток и ждёт результат.В WebFlux-контроллерах — ЗАПРЕЩЕНО.

Итог:
1) webClient.get() / post() / put() / patch() / delete()
2) uri(...)
3) headers(...) / contentType(...) / accept(...) / cookies(...)
4) bodyValue(...) / body(...)        (если нужен body)
5) retrieve() / exchangeToMono()
6) onStatus(...)
7) bodyToMono(...) / bodyToFlux(...)
8) timeout(...) / retry(...) / doOnNext(...)
9) subscribe() / block()             (редко, НЕ в контроллере)